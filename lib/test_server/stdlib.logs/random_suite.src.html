<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/usr/home/jlouis/hacking/test_server/stdlib_test/random_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%% The contents of this file are subject to the Erlang Public License,</i>
    2:<i>%% Version 1.1, (the "License"); you may not use this file except in</i>
    3:<i>%% compliance with the License. You should have received a copy of the</i>
    4:<i>%% Erlang Public License along with this software. If not, it can be</i>
    5:<i>%% retrieved via the world wide web at http://www.erlang.org/.</i>
    6:<i>%% </i>
    7:<i>%% Software distributed under the License is distributed on an "AS IS"</i>
    8:<i>%% basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See</i>
    9:<i>%% the License for the specific language governing rights and limitations</i>
<a name="10"></a>   10:<i>%% under the License.</i>
   11:<i>%% </i>
   12:<i>%% The Initial Developer of the Original Code is Ericsson Utvecklings AB.</i>
   13:<i>%% Portions created by Ericsson are Copyright 1999, Ericsson Utvecklings</i>
   14:<i>%% AB. All Rights Reserved.</i>
   15:<i>%% </i>
   16:<i>%%     $Id$</i>
   17:<i>%%</i>
   18:-<b>module</b>(random_SUITE).
   19:-<b>export</b>([all/1]).
<a name="20"></a>   20:
   21:-<b>export</b>([interval_1/1, seed0/1]).
   22:
   23:-<b>export</b>([init_per_testcase/2, fin_per_testcase/2]).
   24:
   25:-<b>include</b>("test_server.hrl").
   26:
   27:<i>% Default timetrap timeout (set in init_per_testcase).</i>
   28:-<b>define</b>(default_timeout, ?t:minutes(1)).
   29:
<a name=init_per_testcase><a name="30"></a>   30:<b>init_per_testcase</b></a>(Case, Config) -&gt;
   31:    ?line Dog = ?t:timetrap(?default_timeout),
   32:    [{watchdog, Dog} | Config].
<a name=fin_per_testcase>   33:<b>fin_per_testcase</b></a>(Case, Config) -&gt;
   34:    Dog = ?config(watchdog, Config),
   35:    test_server:timetrap_cancel(Dog),
   36:    ok.
   37:
<a name=all>   38:<b>all</b></a>(doc) -&gt;
   39:    ["Test cases for random."];
<a name=all><a name="40"></a>   40:<b>all</b></a>(suite) -&gt;
   41:    [interval_1, seed0].
   42:
<a name=seed0>   43:<b>seed0</b></a>(doc) -&gt;
   44:    ["Test that seed is set implicitly, and always the same."];
<a name=seed0>   45:<b>seed0</b></a>(suite) -&gt;
   46:    [];
<a name=seed0>   47:<b>seed0</b></a>(Config) when list(Config) -&gt;
   48:    ?line Self = self(),
   49:    ?line P1 = spawn(fun() -&gt; Self ! random:uniform() end),
<a name="50"></a>   50:    ?line receive
   51:	      F1 -&gt; ok
   52:	  end,
   53:    ?line P2 = spawn(fun() -&gt; random:seed(),
   54:			      Self ! random:uniform() end),
   55:    ?line receive
   56:	      F2 -&gt; ok
   57:	  end,
   58:    ?line F1 = F2,
   59:    ok.
<a name="60"></a>   60:
   61:
   62:
<a name=interval_1>   63:<b>interval_1</b></a>(doc) -&gt;
   64:    ["Check that uniform/1 returns values within the proper interval."];
<a name=interval_1>   65:<b>interval_1</b></a>(suite) -&gt;
   66:    [];
<a name=interval_1>   67:<b>interval_1</b></a>(Config) when list(Config) -&gt;
   68:    ?line Top = 7,
   69:    ?line N = 10,
<a name="70"></a>   70:    ?line check_interval(N, Top),
   71:    ok.
   72:
<a name=check_interval>   73:<b>check_interval</b></a>(0, _) -&gt; ok;
<a name=check_interval>   74:<b>check_interval</b></a>(N, Top) -&gt;
   75:    X = random:uniform(Top),
   76:    if
   77:	X &lt; 1 -&gt;
   78:	    test_server:fail(too_small);
   79:	X &gt; Top -&gt;
<a name="80"></a>   80:	    test_server:fail(too_large);
   81:	true -&gt;
   82:	    ok
   83:    end,
   84:    check_interval(N-1, Top).
</pre>
<hr size=1><i>The transformation of this file (85 lines) took 0.01 seconds</i><br>
</body>
</html>
