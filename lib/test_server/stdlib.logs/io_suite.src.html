<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/usr/home/jlouis/hacking/test_server/stdlib_test/io_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%% ``The contents of this file are subject to the Erlang Public License,</i>
    2:<i>%% Version 1.1, (the "License"); you may not use this file except in</i>
    3:<i>%% compliance with the License. You should have received a copy of the</i>
    4:<i>%% Erlang Public License along with this software. If not, it can be</i>
    5:<i>%% retrieved via the world wide web at http://www.erlang.org/.</i>
    6:<i>%% </i>
    7:<i>%% Software distributed under the License is distributed on an "AS IS"</i>
    8:<i>%% basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See</i>
    9:<i>%% the License for the specific language governing rights and limitations</i>
<a name="10"></a>   10:<i>%% under the License.</i>
   11:<i>%% </i>
   12:<i>%% The Initial Developer of the Original Code is Ericsson Utvecklings AB.</i>
   13:<i>%% Portions created by Ericsson are Copyright 1999, Ericsson Utvecklings</i>
   14:<i>%% AB. All Rights Reserved.''</i>
   15:<i>%% </i>
   16:<i>%%     $Id$</i>
   17:<i>%%</i>
   18:-<b>module</b>(io_SUITE).
   19:
<a name="20"></a>   20:-<b>export</b>([all/1]).
   21:
   22:-<b>export</b>([init_per_testcase/2, fin_per_testcase/2]).
   23:
   24:-<b>export</b>([error_1/1]).
   25:
   26:-<b>include</b>("test_server.hrl").
   27:
   28:<i>% Default timetrap timeout (set in init_per_testcase).</i>
   29:-<b>define</b>(default_timeout, ?t:minutes(1)).
<a name="30"></a>   30:
<a name=init_per_testcase>   31:<b>init_per_testcase</b></a>(Case, Config) -&gt;
   32:    ?line Dog = ?t:timetrap(?default_timeout),
   33:    [{watchdog, Dog} | Config].
<a name=fin_per_testcase>   34:<b>fin_per_testcase</b></a>(Case, Config) -&gt;
   35:    Dog = ?config(watchdog, Config),
   36:    test_server:timetrap_cancel(Dog),
   37:    ok.
   38:
<a name=all>   39:<b>all</b></a>(doc) -&gt;
<a name="40"></a>   40:    ["Test cases for io."];
<a name=all>   41:<b>all</b></a>(suite) -&gt;
   42:    [error_1].
   43:
<a name=error_1>   44:<b>error_1</b></a>(doc) -&gt;
   45:    ["Error cases for output"];
<a name=error_1>   46:<b>error_1</b></a>(suite) -&gt;
   47:    [];
<a name=error_1>   48:<b>error_1</b></a>(Config) when list(Config) -&gt;
   49:    %% We don't do erroneous output on stdout - the test server
<a name="50"></a>   50:    %% seems to catch that somehow.
   51:    ?line PrivDir = ?config(priv_dir, Config),
   52:    ?line File = filename:join(PrivDir, "slask"),
   53:    ?line {ok, F1} = file:open(File, [write]),
   54:    ?line {'EXIT', _} = (catch io:format(muttru, "hej", [])),
   55:    ?line {'EXIT', _} = (catch io:format(F1, pelle, "hej")),
   56:    ?line {'EXIT', _} = (catch io:format(F1, 1, "hej")),
   57:    ?line {'EXIT', _} = (catch io:format(F1, "~p~", [kaka])),
   58:    ?line {'EXIT', _} = (catch io:format(F1, "~m~n", [kaka])),
   59:
<a name="60"></a>   60:    %% This causes the file process to die, and it is linked to us,
   61:    %% so we can't catch the error this easily.
   62:<i>%    ?line {'EXIT', _} = (catch io:put_chars(F1, 666)),</i>
   63:
   64:    ?line file:close(F1),
   65:    ?line {'EXIT', _} = (catch io:format(F1, "~p", ["hej"])),
   66:    ok.
</pre>
<hr size=1><i>The transformation of this file (67 lines) took 0.00 seconds</i><br>
</body>
</html>
