<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/usr/home/jlouis/hacking/test_server/stdlib_test/filename_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%% ``The contents of this file are subject to the Erlang Public License,</i>
    2:<i>%% Version 1.1, (the "License"); you may not use this file except in</i>
    3:<i>%% compliance with the License. You should have received a copy of the</i>
    4:<i>%% Erlang Public License along with this software. If not, it can be</i>
    5:<i>%% retrieved via the world wide web at http://www.erlang.org/.</i>
    6:<i>%% </i>
    7:<i>%% Software distributed under the License is distributed on an "AS IS"</i>
    8:<i>%% basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See</i>
    9:<i>%% the License for the specific language governing rights and limitations</i>
<a name="10"></a>   10:<i>%% under the License.</i>
   11:<i>%% </i>
   12:<i>%% The Initial Developer of the Original Code is Ericsson Utvecklings AB.</i>
   13:<i>%% Portions created by Ericsson are Copyright 1999, Ericsson Utvecklings</i>
   14:<i>%% AB. All Rights Reserved.''</i>
   15:<i>%% </i>
   16:<i>%%     $Id$</i>
   17:<i>%%</i>
   18:-<b>module</b>(filename_SUITE).
   19:-<b>export</b>([all/1]).
<a name="20"></a>   20:-<b>export</b>([init/1, fini/1,
   21:	 absname/1, absname_2/1, 
   22:	 basename_1/1, basename_2/1,
   23:	 dirname/1, extension/1, join/1, t_nativename/1]).
   24:-<b>export</b>([pathtype/1,rootname/1,split/1,find_src/1]).
   25:-<b>include</b>("test_server.hrl").
   26:
<a name=all>   27:<b>all</b></a>(suite) -&gt; [{conf, init,
   28:		[absname, absname_2, basename_1, basename_2, dirname,
   29:		 extension,
<a name="30"></a>   30:		 join, pathtype, rootname, split, t_nativename, find_src],
   31:		fini}].
   32:
   33:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
   34:
<a name=init>   35:<b>init</b></a>(suite) -&gt; [];
<a name=init>   36:<b>init</b></a>(doc) -&gt; [];
<a name=init>   37:<b>init</b></a>(Config) when list(Config) -&gt;
   38:    case os:type() of
   39:	{win32, _} -&gt;
<a name="40"></a>   40:	    Priv = ?config(priv_dir, Config),
   41:	    ZDrive = filename:join(Priv, "z_drive"),
   42:	    file:make_dir(ZDrive),
   43:	    os:cmd("subst z: " ++ my_nativename(ZDrive)),
   44:	    [{other_drive, $z}|Config];
   45:	_ -&gt;
   46:	    Config
   47:    end.
   48:
<a name=fini>   49:<b>fini</b></a>(suite) -&gt; [];
<a name=fini><a name="50"></a>   50:<b>fini</b></a>(doc) -&gt; [];
<a name=fini>   51:<b>fini</b></a>(Config) when list(Config) -&gt;
   52:    os:cmd("subst z: /d"),
   53:    Config.
   54:
   55:<i>%% Using this function instead of the one in filename allows us</i>
   56:<i>%% to run the tests on R2 versions of OTP.</i>
   57:
<a name=my_nativename>   58:<b>my_nativename</b></a>(Name) -&gt;
   59:    case os:type() of
<a name="60"></a>   60:	{win32, _} -&gt;
   61:	    {ok, Value, _} = regexp:gsub(Name, "/", "\\"),
   62:	    Value;
   63:	_ -&gt;
   64:	    Name
   65:    end.
   66:
<a name=absname>   67:<b>absname</b></a>(doc) -&gt; [];
<a name=absname>   68:<b>absname</b></a>(suite) -&gt; [];
<a name=absname>   69:<b>absname</b></a>(Config) when is_list(Config) -&gt;
<a name="70"></a>   70:    case os:type() of
   71:	{win32, _} -&gt; 
   72:	    ?line Drive = ?config(other_drive, Config),
   73:	    ?line Temp = filename:join([Drive|":"], temp),
   74:	    ?line file:make_dir(Temp),
   75:	    ?line {ok, Cwd} = file:get_cwd(),
   76:	    
   77:	    ?line ok = file:set_cwd(Temp),
   78:	    ?line [Drive|":/temp/foo"] = filename:absname(foo),
   79:	    ?line [Drive|":/temp/foo"] = filename:absname("foo"),
<a name="80"></a>   80:	    ?line [Drive|":/temp/../ebin"] = filename:absname("../ebin"),
   81:	    ?line [Drive|":/erlang"] = filename:absname("/erlang"),
   82:	    ?line [Drive|":/erlang/src"] = filename:absname("/erlang/src"),
   83:	    ?line [Drive|":/erlang/src"] = filename:absname("\\erlang\\src"),
   84:	    ?line [Drive|":/temp/erlang"] = filename:absname([Drive|":erlang"]),
   85:	    ?line [Drive|":/temp/erlang/src"] =
   86:		filename:absname([Drive|":erlang/src"]),
   87:	    ?line [Drive|":/temp/erlang/src"] =
   88:		filename:absname([Drive|":erlang\\src\\"]),
   89:	    ?line "a:/erlang" = filename:absname("a:erlang"),
<a name="90"></a>   90:	    
   91:	    ?line file:set_cwd([Drive|":/"]),
   92:	    ?line [Drive|":/foo"] = filename:absname(foo),
   93:	    ?line [Drive|":/foo"] = filename:absname("foo"),
   94:	    ?line [Drive|":/../ebin"] = filename:absname("../ebin"),
   95:	    ?line [Drive|":/erlang"] = filename:absname("/erlang"),
   96:	    ?line [Drive|":/erlang/src"] = filename:absname("/erlang/src"),
   97:	    ?line [Drive|":/erlang/src"] = filename:absname(["/erlang",'/src']),
   98:	    ?line [Drive|":/erlang/src"] = filename:absname("\\erlang\\\\src"),
   99:	    ?line [Drive|":/erlang"] = filename:absname([Drive|":erlang"]),
<a name="100"></a>  100:	    ?line [Drive|":/erlang/src"] = filename:absname([Drive|":erlang/src"]),
  101:	    ?line "a:/erlang" = filename:absname("a:erlang"),
  102:	    
  103:	    ?line file:set_cwd(Temp),
  104:	    ?line file:set_cwd(Cwd),
  105:	    ?line [Drive|":/temp/kalle"] = filename:absname([Drive|":kalle"]),
  106:	    ok;
  107:	{unix, _} -&gt;  
  108:	    ?line ok = file:set_cwd("/usr"),
  109:	    ?line "/usr/foo" = filename:absname(foo),
<a name="110"></a>  110:	    ?line "/usr/foo" = filename:absname("foo"),
  111:	    ?line "/usr/../ebin" = filename:absname("../ebin"),
  112:	    
  113:	    ?line file:set_cwd("/"),
  114:	    ?line "/foo" = filename:absname(foo),
  115:	    ?line "/foo" = filename:absname("foo"),
  116:	    ?line "/../ebin" = filename:absname("../ebin"),
  117:	    ?line "/erlang" = filename:absname("/erlang"),
  118:	    ?line "/erlang/src" = filename:absname("/erlang/src"),
  119:	    ?line "/erlang/src" = filename:absname(["/erl",'ang/s',"rc"]),
<a name="120"></a>  120:	    ?line "/erlang/src" = filename:absname(["/erl",'a','ng',"/",'s',"rc"]),
  121:	    ?line "/erlang/src" = filename:absname("/erlang///src"),
  122:	    ?line "/file_sorter.erl" = filename:absname([file_sorter|'.erl']),
  123:	    ok;
  124:	vxworks -&gt;
  125:	    Test_dir = ?config(priv_dir, Config),
  126:	    Test1 = Test_dir ++ "/foo",
  127:	    Test2 = Test_dir ++ "/ebin",
  128:	    ?line ok = file:set_cwd(Test_dir),
  129:	    ?line Test1 = filename:absname(foo),
<a name="130"></a>  130:	    ?line Test1= filename:absname("foo"),
  131:	    ?line Test2 = filename:absname("foo/../ebin"),
  132:	    ?line "/erlang" = filename:absname("/erlang"),
  133:	    ?line "/erlang/src" = filename:absname("/erlang/src"),
  134:	    ?line "/erlang/src" = filename:absname(["/erlan",'g/s',"rc"]),
  135:	    ?line "/erlang/src" = filename:absname("/erlang///src"),
  136:	    ok
  137:    end.
  138:
  139:
<a name="140"></a>  140:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
  141:
<a name=absname_2>  142:<b>absname_2</b></a>(doc) -&gt; [];
<a name=absname_2>  143:<b>absname_2</b></a>(suite) -&gt; [];
<a name=absname_2>  144:<b>absname_2</b></a>(Config) when list(Config) -&gt;
  145:    case os:type() of
  146:	{win32, _} -&gt;
  147:	    ?line Drive = ?config(other_drive, Config),
  148:	    
  149:	    ?line [Drive|":/temp/foo"] = filename:absname(foo, [Drive|":/temp"]),
<a name="150"></a>  150:	    ?line [Drive|":/temp/foo"] = filename:absname("foo", [Drive|":/temp"]),
  151:	    ?line [Drive|":/temp/../ebin"] = filename:absname("../ebin",
  152:							      [Drive|":/temp"]),
  153:	    ?line [Drive|":/erlang"] = filename:absname("/erlang", [Drive|":/temp"]),
  154:	    ?line [Drive|":/erlang/src"] = filename:absname("/erlang/src",
  155:							    [Drive|":/temp"]),
  156:	    ?line [Drive|":/erlang/src"] = filename:absname("\\erlang\\src",
  157:							    [Drive|":/temp"]),
  158:	    ?line [Drive|":/temp/erlang"] = filename:absname([Drive|":erlang"],
  159:							     [Drive|":/temp"]),
<a name="160"></a>  160:	    ?line [Drive|":/temp/erlang/src"] = filename:absname([Drive|":erlang/src"],
  161:								 [Drive|":/temp"]),
  162:	    ?line [Drive|":/temp/erlang/src"] =
  163:		filename:absname([Drive|":erlang\\src\\"], [Drive|":/temp"]),
  164:	    ?line "a:/erlang" = filename:absname("a:erlang", [Drive|":/temp"]),
  165:	    
  166:	    ?line file:set_cwd([Drive|":/"]),
  167:	    ?line [Drive|":/foo"] = filename:absname(foo, [Drive|":/"]),
  168:	    ?line [Drive|":/foo"] = filename:absname("foo", [Drive|":/"]),
  169:	    ?line [Drive|":/../ebin"] = filename:absname("../ebin", [Drive|":/"]),
<a name="170"></a>  170:	    ?line [Drive|":/erlang"] = filename:absname("/erlang", [Drive|":/"]),
  171:	    ?line [Drive|":/erlang/src"] = filename:absname("/erlang/src",
  172:							    [Drive|":/"]),
  173:	    ?line [Drive|":/erlang/src"] = filename:absname("\\erlang\\\\src",
  174:							    [Drive|":/"]),
  175:	    ?line [Drive|":/erlang"] = filename:absname([Drive|":erlang"],
  176:							[Drive|":/"]),
  177:	    ?line [Drive|":/erlang/src"] = filename:absname([Drive|":erlang/src"],
  178:							    [Drive|":/"]),
  179:	    ?line "a:/erlang" = filename:absname("a:erlang", [Drive|":/"]),
<a name="180"></a>  180:	    
  181:	    ok;
  182:	{unix, _} -&gt;
  183:	    ?line "/usr/foo" = filename:absname(foo, "/usr"),
  184:	    ?line "/usr/foo" = filename:absname("foo", "/usr"),
  185:	    ?line "/usr/../ebin" = filename:absname("../ebin", "/usr"),
  186:	    
  187:	    ?line "/foo" = filename:absname(foo, "/"),
  188:	    ?line "/foo" = filename:absname("foo", "/"),
  189:	    ?line "/../ebin" = filename:absname("../ebin", "/"),
<a name="190"></a>  190:	    ?line "/erlang" = filename:absname("/erlang", "/"),
  191:	    ?line "/erlang/src" = filename:absname("/erlang/src", "/"),
  192:	    ?line "/erlang/src" = filename:absname("/erlang///src", "/"),
  193:	    ok;
  194:	vxworks -&gt;
  195:	    ?line "/usr/foo" = filename:absname(foo, "/usr"),
  196:	    ?line "/usr/foo" = filename:absname("foo", "/usr"),
  197:	    ?line "/usr/ebin" = filename:absname("../ebin", "/usr"),
  198:	    ?line "/usr/ebin" = filename:absname("../ebin", "/usr/src"),
  199:	    ?line "/erlang" = filename:absname("/erlang", "/usr"),
<a name="200"></a>  200:	    ?line "/erlang/src" = filename:absname("/erlang/src", "/usr"),
  201:	    ?line "/erlang/src" = filename:absname("/erlang///src", "/usr"),
  202:	    ok
  203:    end.
  204:
  205:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
  206:
<a name=basename_1>  207:<b>basename_1</b></a>(doc) -&gt; [];
<a name=basename_1>  208:<b>basename_1</b></a>(suite) -&gt; [];
<a name=basename_1>  209:<b>basename_1</b></a>(Config) when list(Config) -&gt;
<a name="210"></a>  210:    ?line Dog = test_server:timetrap(test_server:seconds(10)),
  211:    ?line "." = filename:basename("."),
  212:    ?line "foo" = filename:basename("foo"),
  213:    ?line "foo" = filename:basename("/usr/foo"),
  214:    ?line "foo.erl" = filename:basename("A:usr/foo.erl"),
  215:    ?line "foo" = filename:basename('/usr/foo'),
  216:    ?line "foo" = filename:basename(["/usr","/","f","o","o"]),
  217:    ?line "foo" = filename:basename(["/usr/",foo]),
  218:    ?line "foo" = filename:basename(["/usr/f",oo]),
  219:    ?line "foo" = filename:basename(["usr/", "foo"]),
<a name="220"></a>  220:    ?line "foo" = filename:basename(["usr/"|foo]),
  221:    ?line "foo" = filename:basename(["usr/foo/"]),
  222:    ?line case os:type() of
  223:	      {win32, _} -&gt;
  224:		  ?line "foo" = filename:basename(["usr\\foo\\"]),
  225:		  ?line "foo" = filename:basename("A:\\usr\\foo"),
  226:		  ?line "foo" = filename:basename("A:foo");
  227:	      {unix, _} -&gt;
  228:		  ?line "strange\\but\\true" =
  229:		      filename:basename("strange\\but\\true");
<a name="230"></a>  230:	      vxworks -&gt; 
  231:		  ?line "foo" =  filename:basename(["usr\\foo\\"]),
  232:		  ?line "foo" =  filename:basename("elrond:usr\\foo\\"),
  233:		  ?line "foo" =  filename:basename("disk:/foo")
  234:	  end,
  235:    ?line test_server:timetrap_cancel(Dog),
  236:    ok.
  237:
<a name=basename_2>  238:<b>basename_2</b></a>(doc) -&gt; [];
<a name=basename_2>  239:<b>basename_2</b></a>(suite) -&gt; [];
<a name=basename_2><a name="240"></a>  240:<b>basename_2</b></a>(Config) when list(Config) -&gt;
  241:    ?line Dog = test_server:timetrap(test_server:seconds(10)),
  242:    ?line "." = filename:basename(".", ".erl"),
  243:    ?line "foo" = filename:basename("foo.erl", ".erl"),
  244:    ?line "foo" = filename:basename('foo.erl', ".erl"),
  245:    ?line "foo" = filename:basename("foo.erl", '.erl'),
  246:    ?line "foo" = filename:basename(["/usr","/","f","oo"], ".erl"),
  247:    ?line "foo.erl" = filename:basename("/usr/foo.erl", ".hrl"),
  248:    ?line "foo.erl" = filename:basename("/usr.hrl/foo.erl", ".hrl"),
  249:    ?line "foo" = filename:basename("/usr.hrl/foo", ".hrl"),
<a name="250"></a>  250:    ?line "foo" = filename:basename("usr/foo/", ".erl"),
  251:    ?line "foo.erl" = filename:basename("usr/foo.erl/", ".erl"),
  252:    ?line "foo.erl" = filename:basename("usr/foo.erl/", '.erl'),
  253:    ?line "foo" = filename:basename(["/usr",'/','f','oo'], ".erl"),
  254:    ?line "foo.erl" = filename:basename(["usr/foo.e",'rl/'], ".erl"),
  255:    ?line case os:type() of
  256:	      {win32, _} -&gt;
  257:		  ?line "foo" = filename:basename("A:foo", ".erl"),
  258:		  ?line "foo.erl" = filename:basename("a:\\usr\\foo.erl",
  259:						      ".hrl"),
<a name="260"></a>  260:		  ?line "foo.erl" = filename:basename("c:\\usr.hrl\\foo.erl",
  261:						      ".hrl"),
  262:		  ?line "foo" = filename:basename("A:\\usr\\foo", ".hrl");
  263:	      {unix, _} -&gt;
  264:		  ?line "strange\\but\\true" =
  265:		      filename:basename("strange\\but\\true.erl", ".erl"),
  266:		  ?line "strange\\but\\true" =
  267:		      filename:basename("strange\\but\\true", ".erl");
  268:	      vxworks -&gt;
  269:		  ?line "foo" = filename:basename("net:foo", ".erl"),
<a name="270"></a>  270:		  ?line "foo.erl" = filename:basename("net:\\usr\\foo.erl",
  271:						      ".hrl"),
  272:		  ?line "foo.erl" =
  273:		      filename:basename("/disk0:\\usr.hrl\\foo.erl",
  274:						      ".hrl"),
  275:		  ?line "foo" = filename:basename("/home\\usr\\foo", ".hrl")
  276:	  end,
  277:    ?line test_server:timetrap_cancel(Dog),
  278:    ok.
  279:
<a name="280"></a>  280:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
  281:
<a name=dirname>  282:<b>dirname</b></a>(doc) -&gt; [];
<a name=dirname>  283:<b>dirname</b></a>(suite) -&gt; [];
<a name=dirname>  284:<b>dirname</b></a>(Config) when list(Config) -&gt;
  285:    case os:type() of
  286:       {win32,_} -&gt;
  287:	    ?line "A:/usr" = filename:dirname("A:/usr/foo.erl"),
  288:	    ?line "A:usr" = filename:dirname("A:usr/foo.erl"),
  289:	    ?line "/usr" = filename:dirname("\\usr\\foo.erl"),
<a name="290"></a>  290:	    ?line "/" = filename:dirname("\\usr"),
  291:	    ?line "A:" = filename:dirname("A:");
  292:       vxworks -&gt;
  293:	    ?line "net:/usr" = filename:dirname("net:/usr/foo.erl"),
  294:	    ?line "/disk0:/usr" = filename:dirname("/disk0:/usr/foo.erl"),
  295:	    ?line "/usr" = filename:dirname("\\usr\\foo.erl"),
  296:	    ?line "/usr" = filename:dirname("\\usr"),
  297:	    ?line "net:" = filename:dirname("net:");
  298:	_ -&gt; true
  299:    end,
<a name="300"></a>  300:    ?line "usr" = filename:dirname("usr///foo.erl"),
  301:    ?line "." = filename:dirname("foo.erl"),
  302:    ?line "." = filename:dirname("."),
  303:    ?line "usr" = filename:dirname('usr/foo.erl'),
  304:    ?line "usr" = filename:dirname(['usr','/foo.erl']),
  305:    ?line "usr" = filename:dirname(['us','r/foo.erl']),
  306:    ?line "usr" = filename:dirname(['usr/','/foo.erl']),
  307:    ?line "usr" = filename:dirname(['usr/','foo.erl']),
  308:    ?line "usr" = filename:dirname(['usr/'|'foo.erl']),
  309:    ?line "usr" = filename:dirname(['usr/f','oo.erl']),
<a name="310"></a>  310:    case os:type() of
  311:	vxworks -&gt; 
  312:	    ?line "/" = filename:dirname("/"),
  313:	    ?line "/usr" = filename:dirname("/usr");
  314:	_ -&gt;
  315:	    ?line "/" = filename:dirname("/"),
  316:	    ?line "/" = filename:dirname("/usr")
  317:    end,
  318:    ok.
  319:    
<a name="320"></a>  320:
  321:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
  322:
<a name=extension>  323:<b>extension</b></a>(doc) -&gt; [];
<a name=extension>  324:<b>extension</b></a>(suite) -&gt; [];
<a name=extension>  325:<b>extension</b></a>(Config) when list(Config) -&gt;
  326:    ?line ".erl" = filename:extension("A:/usr/foo.erl"),
  327:    ?line ".erl" = filename:extension("A:/usr/foo.nisse.erl"),
  328:    ?line ".erl" = filename:extension(["A:/usr/", 'foo.ni', "sse.erl"]),
  329:    ?line ".erl" = filename:extension(["A:/usr/", 'foo.ni', "sse.e", 'rl']),
<a name="330"></a>  330:    ?line ".erl" = filename:extension(["A:/usr/", 'foo.ni', "sse.e"|'rl']),
  331:    ?line ".erl" = filename:extension("A:/usr.bar/foo.nisse.erl"),
  332:    ?line "" = filename:extension("A:/usr.bar/foo"),
  333:    ?line "" = filename:extension("A:/usr/foo"),
  334:    ?line case os:type() of
  335:	      {win32, _} -&gt;
  336:		  ?line "" = filename:extension("A:\\usr\\foo"),
  337:		  ?line ".erl" =
  338:		      filename:extension("A:/usr.bar/foo.nisse.erl"),
  339:		  ?line "" = filename:extension("A:/usr.bar/foo"),
<a name="340"></a>  340:		  ok;
  341:	      vxworks -&gt;
  342:		  ?line "" = filename:extension("/disk0:\\usr\\foo"),
  343:		  ?line ".erl" =
  344:		      filename:extension("net:/usr.bar/foo.nisse.erl"),
  345:		  ?line "" = filename:extension("net:/usr.bar/foo"),
  346:		  ok;
  347:	      _ -&gt; ok
  348:	  end.
  349:
<a name="350"></a>  350:<i>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</i>
  351:    
<a name=join>  352:<b>join</b></a>(doc) -&gt; [];
<a name=join>  353:<b>join</b></a>(suite) -&gt; [];
<a name=join>  354:<b>join</b></a>(Config) when list(Config) -&gt;
  355:    ?line "/" = filename:join(["/"]),
  356:    ?line "/" = filename:join(["//"]),
  357:    ?line "usr/foo.erl" = filename:join("usr","foo.erl"),
  358:    ?line "/src/foo.erl" = filename:join(usr, "/src/foo.erl"),
  359:    ?line "/src/foo.erl" = filename:join(["/src/",'foo.erl']),
<a name="360"></a>  360:    ?line "/src/foo.erl" = filename:join(usr, ["/sr", 'c/foo.erl']),
  361:    ?line "/src/foo.erl" = filename:join("usr", "/src/foo.erl"),
  362:
  363:    %% Make sure that redundant slashes work too.
  364:    ?line "a/b/c/d/e/f/g" = filename:join(["a//b/c/////d//e/f/g"]),
  365:    ?line "a/b/c/d/e/f/g" = filename:join(["a//b/c/", "d//e/f/g"]),
  366:    ?line "a/b/c/d/e/f/g" = filename:join(["a//b/c", "d//e/f/g"]),
  367:    ?line "/d/e/f/g" = filename:join(["a//b/c", "/d//e/f/g"]),
  368:    ?line "/d/e/f/g" = filename:join(["a//b/c", "//d//e/f/g"]),
  369:
<a name="370"></a>  370:    ?line "foo/bar" = filename:join([$f,$o,$o,$/,[]], "bar"),
  371:
  372:    ?line case os:type() of
  373:	      {win32, _} -&gt;
  374:		  ?line "d:/" = filename:join(["D:/"]),
  375:		  ?line "d:/" = filename:join(["D:\\"]),
  376:		  ?line "d:/abc" = filename:join(["D:/", "abc"]),
  377:		  ?line "d:abc" = filename:join(["D:", "abc"]),
  378:		  ?line "a/b/c/d/e/f/g" =
  379:		      filename:join(["a//b\\c//\\/\\d/\\e/f\\g"]),
<a name="380"></a>  380:		  ?line "a:usr/foo.erl" =
  381:		      filename:join(["A:","usr","foo.erl"]),
  382:		  ?line "/usr/foo.erl" =
  383:		      filename:join(["A:","/usr","foo.erl"]),
  384:		  ?line "c:usr" = filename:join("A:","C:usr"),
  385:		  ?line "a:usr" = filename:join("A:","usr"),
  386:		  ?line "c:/usr" = filename:join("A:", "C:/usr"),
  387:		  ?line "c:/usr/foo.erl" =
  388:		      filename:join(["A:","C:/usr","foo.erl"]),
  389:		  ?line "c:usr/foo.erl" =
<a name="390"></a>  390:		      filename:join(["A:","C:usr","foo.erl"]),
  391:		  ?line "d:/foo" = filename:join([$D, $:, $/, []], "foo"),
  392:		  ok;
  393:	      vxworks -&gt;
  394:		  ?line "Net:" = filename:join(["Net:/"]),
  395:		  ?line "net:" = filename:join(["net:\\"]),
  396:		  ?line "net:/abc" = filename:join(["net:/", "abc"]),
  397:		  ?line "net:/abc" = filename:join(["net:", "abc"]),
  398:		  ?line "a/b/c/d/e/f/g" =
  399:		      filename:join(["a//b\\c//\\/\\d/\\e/f\\g"]),
<a name="400"></a>  400:		  ?line "net:/usr/foo.erl" =
  401:		      filename:join(["net:","usr","foo.erl"]),
  402:		  ?line "/usr/foo.erl" =
  403:		      filename:join(["net:","/usr","foo.erl"]),
  404:		  ?line "/target:usr" = filename:join("net:","/target:usr"),
  405:		  ?line "kernel:/usr" = filename:join("net:", "kernel:/usr"),
  406:		  ?line "foo:/usr/foo.erl" =
  407:		      filename:join(["A:","foo:/usr","foo.erl"]),
  408:		  ?line "/disk0:usr/foo.erl" =
  409:		      filename:join(["kalle:","/disk0:usr","foo.erl"]),
<a name="410"></a>  410:		  ?line "D:/foo" = filename:join([$D, $:, $/, []], "foo"),
  411:		  ok;
  412:	      {unix, _} -&gt;
  413:		  ok
  414:	  end.
  415:
<a name=pathtype>  416:<b>pathtype</b></a>(doc) -&gt; [];
<a name=pathtype>  417:<b>pathtype</b></a>(suite) -&gt; [];
<a name=pathtype>  418:<b>pathtype</b></a>(Config) when list(Config) -&gt;
  419:    ?line relative = filename:pathtype(".."),
<a name="420"></a>  420:    ?line relative = filename:pathtype("foo"),
  421:    ?line relative = filename:pathtype("foo/bar"),
  422:    ?line relative = filename:pathtype('foo/bar'),
  423:    ?line relative = filename:pathtype(['f','oo',"/bar"]),
  424:    case os:type() of
  425:	{win32, _} -&gt;
  426:	    ?line volumerelative = filename:pathtype("/usr/local/bin"),
  427:	    ?line volumerelative = filename:pathtype("A:usr/local/bin"),
  428:	    ok;
  429:	{unix, _} -&gt;
<a name="430"></a>  430:	    ?line absolute = filename:pathtype("/"),
  431:	    ?line absolute = filename:pathtype("/usr/local/bin"),
  432:	    ok;
  433:	vxworks -&gt;
  434:	    ?line absolute = filename:pathtype("/usr/local/bin"),
  435:	    ?line absolute = filename:pathtype("net:usr/local/bin"),
  436:	    ok
  437:    end.
  438:
<a name=rootname>  439:<b>rootname</b></a>(doc) -&gt; [];
<a name=rootname><a name="440"></a>  440:<b>rootname</b></a>(suite) -&gt; [];
<a name=rootname>  441:<b>rootname</b></a>(Config) when list(Config) -&gt;
  442:    ?line "/jam.src/kalle" = filename:rootname("/jam.src/kalle"),
  443:    ?line "/jam.src/foo" = filename:rootname("/jam.src/foo.erl"),
  444:    ?line "/jam.src/foo" = filename:rootname(["/ja",'m.sr',"c/foo.erl"]),
  445:    ?line "/jam.src/foo" = filename:rootname("/jam.src/foo.erl", ".erl"),
  446:    ?line "/jam.src/foo.jam" = filename:rootname("/jam.src/foo.jam", ".erl"),
  447:    ?line "/jam.src/foo.jam" = filename:rootname(["/jam.sr",'c/foo.j',"am"],".erl"),
  448:    ?line "/jam.src/foo.jam" = filename:rootname(["/jam.sr",'c/foo.j'|am],".erl"),
  449:    ok.
<a name="450"></a>  450:
<a name=split>  451:<b>split</b></a>(doc) -&gt; [];
<a name=split>  452:<b>split</b></a>(suite) -&gt; [];
<a name=split>  453:<b>split</b></a>(Config) when list(Config) -&gt;
  454:    case os:type() of 
  455:	vxworks -&gt;
  456:	    ?line ["/usr","local","bin"] = filename:split("/usr/local/bin");
  457:	_ -&gt;
  458:	    ?line ["/","usr","local","bin"] = filename:split("/usr/local/bin")
  459:    end,
<a name="460"></a>  460:    ?line ["foo","bar"]= filename:split("foo/bar"),
  461:    ?line ["foo", "bar", "hello"]= filename:split("foo////bar//hello"),
  462:    ?line ["foo", "bar", "hello"]= filename:split(["foo//",'//bar//h',"ello"]),
  463:    ?line ["foo", "bar", "hello"]= filename:split(["foo//",'//bar//h'|ello]),
  464:    case os:type() of
  465:       {win32,_} -&gt;
  466:	    ?line ["a:/","msdev","include"] =
  467:		filename:split("a:/msdev/include"),
  468:	    ?line ["a:/","msdev","include"] =
  469:		filename:split("A:/msdev/include"),
<a name="470"></a>  470:	    ?line ["msdev","include"] =
  471:		filename:split("msdev\\include"),
  472:	    ?line ["a:/","msdev","include"] =
  473:		filename:split("a:\\msdev\\include"),
  474:	    ?line ["a:","msdev","include"] =
  475:		filename:split("a:msdev\\include"),
  476:	    ok;
  477:	vxworks -&gt;
  478:	    ?line ["net:","msdev","include"] =
  479:		filename:split("net:/msdev/include"),
<a name="480"></a>  480:	    ?line ["Target:","msdev","include"] =
  481:		filename:split("Target:/msdev/include"),
  482:	    ?line ["msdev","include"] =
  483:		filename:split("msdev\\include"),
  484:	    ?line ["/disk0:","msdev","include"] =
  485:		filename:split("/disk0:\\msdev\\include"),
  486:	    ?line ["a:","msdev","include"] =
  487:		filename:split("a:msdev\\include"),
  488:	    ok;
  489:       _ -&gt;
<a name="490"></a>  490:	    ok
  491:    end.
  492:
<a name=t_nativename>  493:<b>t_nativename</b></a>(doc) -&gt; [];
<a name=t_nativename>  494:<b>t_nativename</b></a>(suite) -&gt; [];
<a name=t_nativename>  495:<b>t_nativename</b></a>(Config) when list(Config) -&gt;
  496:    ?line "abcedf" = filename:nativename(abcedf),
  497:    ?line "abcedf" = filename:nativename(["abc", "edf"]),
  498:    ?line "abcgluff" = filename:nativename(["abc", gluff]),
  499:    case os:type() of
<a name="500"></a>  500:	{win32, _} -&gt;
  501:	    ?line "a:\\temp\\arne.exe" =
  502:		filename:nativename("A:/temp//arne.exe/");
  503:	_ -&gt;
  504:	    ?line "/usr/tmp/arne" =
  505:		filename:nativename("/usr/tmp//arne/")
  506:    end.
  507:
<a name=find_src>  508:<b>find_src</b></a>(doc) -&gt; [];
<a name=find_src>  509:<b>find_src</b></a>(suite) -&gt; [];
<a name=find_src><a name="510"></a>  510:<b>find_src</b></a>(Config) when list(Config) -&gt;
  511:    ?line {Source,Options} = filename:find_src(file),
  512:    ?line ["file"|T] = lists:reverse(filename:split(Source)),
  513:    ?line {S2,O2} = filename:find_src(init, [{".","."}, {"ebin","src"}]),
  514:    
  515:    %% Try to find the source for a preloaded module.
  516:    ?line {error, {preloaded, init}} = filename:find_src(init),
  517:    ok.
</pre>
<hr size=1><i>The transformation of this file (518 lines) took 0.01 seconds</i><br>
</body>
</html>
